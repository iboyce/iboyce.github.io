<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hi, Boyce!">










<meta name="description" content="AI">
<meta property="og:type" content="website">
<meta property="og:title" content="博伊斯">
<meta property="og:url" content="http://iboyce.com/index.html">
<meta property="og:site_name" content="博伊斯">
<meta property="og:description" content="AI">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="博伊斯">
<meta name="twitter:description" content="AI">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://iboyce.com/">





  <title>博伊斯</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?06f89fd473279d1c49e0201518e9dc4f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">博伊斯</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">森林中的独立者</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/序列模型.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/序列模型.html" itemprop="url">序列模型</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-03T06:58:03+08:00">
                2018-07-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI梦/" itemprop="url" rel="index">
                    <span itemprop="name">AI梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/序列模型.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/序列模型.html" class="cy_cmt_count" data-xid="/blog/序列模型.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="序列模型"><a href="#序列模型" class="headerlink" title="序列模型"></a>序列模型</h1><h2 id="第一周-循环序列模型"><a href="#第一周-循环序列模型" class="headerlink" title="第一周 循环序列模型"></a>第一周 循环序列模型</h2><h3 id="为什么要用序列模型"><a href="#为什么要用序列模型" class="headerlink" title="为什么要用序列模型"></a>为什么要用序列模型</h3><ul>
<li><p>在序列数据上表现良好<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/9443a76b9c6f7305dc764f26612bf03a.png" alt="ng_seq_example"></p>
</li>
<li><p>在以上案例中可以发现X,Y适用不同的情况，两者可以是序列，也可以其中一个是序列</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/ElasticSearch常见操作.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/ElasticSearch常见操作.html" itemprop="url">ElasticSearch常见操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-31T10:19:26+08:00">
                2018-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/深耕码农/" itemprop="url" rel="index">
                    <span itemprop="name">深耕码农</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/ElasticSearch常见操作.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/ElasticSearch常见操作.html" class="cy_cmt_count" data-xid="/blog/ElasticSearch常见操作.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="几个基本概念"><a href="#几个基本概念" class="headerlink" title="几个基本概念"></a>几个基本概念</h2><ul>
<li>索引——库</li>
<li>类型——表</li>
<li>文档——表记录</li>
<li>字段——字段</li>
</ul>
<h2 id="带来的好处"><a href="#带来的好处" class="headerlink" title="　带来的好处"></a>　带来的好处</h2><ul>
<li>海量数据检索秒级返回，具备结构化、全文、多字段、相关度及模糊匹配搜索能力</li>
<li>海量数据量准实时分析，包括按时间统计、过滤、排序、求和、百分位计算等各类聚合操作、关联关系的建模</li>
<li>NoSql的弹性，无须提前设计表结构</li>
</ul>
<h2 id="如何交互"><a href="#如何交互" class="headerlink" title="如何交互"></a>如何交互</h2><ul>
<li>JAVA/PYTHON.. API</li>
<li>Restful 接口<ul>
<li>CURL</li>
<li>可以使用任何语言</li>
</ul>
</li>
<li>Sense控制台<ul>
<li>参见<a href="https://www.elastic.co/guide/en/sense/current/sense-ui.html" target="_blank" rel="noopener">Sense UI指南</a></li>
</ul>
</li>
</ul>
<h2 id="如何快速入门"><a href="#如何快速入门" class="headerlink" title="如何快速入门"></a>如何快速入门</h2><ul>
<li>开源开源！—— <a href="https://www.elastic.co" target="_blank" rel="noopener">官网</a></li>
<li>《Elasticsearch 权威指南》中文版，参考<a href="https://es.xiaoleilu.com/" target="_blank" rel="noopener">电子版</a></li>
</ul>
<h2 id="简单操作示例"><a href="#简单操作示例" class="headerlink" title="简单操作示例"></a>简单操作示例</h2><h3 id="增-index"><a href="#增-index" class="headerlink" title="增(index)"></a>增(index)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##PUT-GET谓词</span></span><br><span class="line">PUT stockfactor_2018<span class="number">.01</span><span class="number">.30</span>/airr_mapping</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"stockname"</span>: <span class="string">"招商银行"</span>,</span><br><span class="line">  <span class="string">"open"</span>:  <span class="string">"32.90"</span>,</span><br><span class="line">  <span class="string">"close"</span>: <span class="string">"32.57"</span></span><br><span class="line">&#125;</span><br><span class="line">GET stockfactor_2018<span class="number">.01</span><span class="number">.30</span>/airr_mapping/<span class="number">600036</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##POST谓词</span></span><br><span class="line">POST stockfactor_2018<span class="number">.01</span><span class="number">.30</span>/airr_mapping</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"stockname"</span>: <span class="string">"招商银行"</span>,</span><br><span class="line">  <span class="string">"open"</span>:  <span class="string">"32.90"</span>,</span><br><span class="line">  <span class="string">"close"</span>: <span class="string">"32.57"</span></span><br><span class="line">&#125;</span><br><span class="line">GET stockfactor_2018<span class="number">.01</span><span class="number">.30</span>/airr_mapping/_search</span><br></pre></td></tr></table></figure>
<p>正常的话返回确认响应体，以上代表两种方式，一种是“你严格按照我说的去办”PUT-GET方法，一种是“请帮我处理这条请求”的POST方法，可以注意到，POST方法无须指定_id,ElasticSearch会帮助你生成一条。</p>
<h3 id="删"><a href="#删" class="headerlink" title="删"></a>删</h3><h3 id="改"><a href="#改" class="headerlink" title="改"></a>改</h3><h3 id="查"><a href="#查" class="headerlink" title="查"></a>查</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##取回部分字段</span></span><br><span class="line">GET stockfactor_2018.01.30/airr_mapping/600036?_source=stockname,open</span><br><span class="line">GET stockfactor_2018<span class="number">.01</span><span class="number">.30</span>/airr_mapping/_search</span><br><span class="line"><span class="comment">##使用通配符来搜索多索引、多类型</span></span><br><span class="line">GET */airr_mapping/_search?_source=astr_intro,double_pb,double_pe_ttm?size=5&amp;from=10</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/卷积神经网络.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/卷积神经网络.html" itemprop="url">卷积神经网络</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-15T21:09:47+08:00">
                2018-01-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI梦/" itemprop="url" rel="index">
                    <span itemprop="name">AI梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/卷积神经网络.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/卷积神经网络.html" class="cy_cmt_count" data-xid="/blog/卷积神经网络.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="卷积神经网络"><a href="#卷积神经网络" class="headerlink" title="卷积神经网络"></a>卷积神经网络</h1><h2 id="第一周-卷积神经网络"><a href="#第一周-卷积神经网络" class="headerlink" title="第一周 卷积神经网络"></a>第一周 卷积神经网络</h2><ul>
<li>图像分类</li>
<li>目标检测</li>
<li>衍生的新的艺术形式：风格迁移</li>
<li>以上处理参数巨大，难以有足够的数据防止过拟合，所以需要引入卷积</li>
</ul>
<h3 id="边缘检测"><a href="#边缘检测" class="headerlink" title="边缘检测"></a>边缘检测</h3><ul>
<li>使用卷积进行边缘检测的示例<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/d62af4f28a74993ca8203e2bc49724f7.png" alt="ng_edgedetect"><br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/a5e08bd2c256d7f8869b1529f39f067b.png" alt="ng_edetect"></li>
<li>卷积核或者说过滤器的选择很多文献讨论过，除了常见的过滤器，如下图的边缘检测，过滤器也可以做为参数学习出来<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/f1ed787d1a20b5960ed419dd5d60c69e.png" alt="ng_filter"></li>
</ul>
<h3 id="卷积神经网络-1"><a href="#卷积神经网络-1" class="headerlink" title="卷积神经网络"></a>卷积神经网络</h3><p>以下$n$为图像大小，$f$为filter大小，$p$为padding大小</p>
<ul>
<li>valid: $n-f+1$为过滤后的大小, 这样输出<strong>图像会越来越小,而且会丢掉边缘位置</strong>，因此引入padding使用输出图像大小</li>
<li>same: $n+2p-f+1=n$, $p=(f-1)/2$，因此$f$为奇数时，便可以选择相应大小的padding填充尺寸，所以在计算机视觉中很少看到偶数尺寸的过滤器，除非使用不自然的不对称的填充，而且用奇数过滤器有个中心便于指出它的位置.因此，建议使用<em>奇数过滤器</em>。</li>
<li>若加入步伐stride,则输出尺寸为<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/6ae57951570e44ca6b74003fe54cde53.png" alt="ng_stride"></li>
<li>多个过滤器，一个过滤器通常一个二维输出（即使有多个通道，但过滤规则就一个，比如通常用红的横向边缘检测），但可以用多个过滤器去卷之，这样同样能得到一个输出立方体。注意过滤器的长宽可以不一致。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/9ad4f66cd2080d4086a0acec0852eda9.png" alt="ng_multifilter"></li>
<li>单层卷积，由超参过滤器大小f，步伐s,Padding p决定下层的大小和过滤数的个数filters决定下一层的深度，即通道数，最后一层所有参数作为输入经激活函数得出结果。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/0cb72ff62d4c89ad9b8136f2e0db0331.png" alt="ng_conv"></li>
<li>池化，一般有最大池化和平均池化，前者后普遍使用，经常使用超参f=2,s=2，输出大小 正好减半，也有f=3,s=2或f=3,s=1。至少为什么用池化，总之在实验室效果很好，直观上在某个区域只要获取特征是否存在，存在取最大值。同时池化基本不用padding，后面会讲。</li>
<li>参考LeNet5的一个完整的CNN示例，关注以下几点<ul>
<li>在这里把CONV-POOL作为一层，POOL层无参数，但有的文献算为两层</li>
<li>超参的选择最好是参考论文，比如S=F=2，大小正好减半</li>
<li>这里的全连接层每一层400，第二层120，百度原因全连接在于对细化特征的重新分类，参考知乎上的说法，</li>
<li>这里的全连接层每一层400，第二层120，百度原因全连接在于对细化特征的重新分类，<a href="https://www.zhihu.com/question/41037974" target="_blank" rel="noopener">参考知乎</a>上的说法，近期一些性能优异的网络模型如ResNet和GoogLeNet等均用全局平均池化（global average pooling，GAP，即卷积核为1*1）取代FC来融合学到的深度特征，最后仍用softmax等损失函数作为网络目标函数来指导学习过程。需要指出的是，用GAP替代FC的网络通常有较好的预测性能，它减少了参数和过拟合。</li>
<li>参数表下图，有二特点，一输出维度越来越小；二参数，输入没有参数，第一层卷积，卷积核参数5<em>5</em>8+8（BIAS）=208个参数，池化层无参数，第<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/f6c006b85ade925f134b42d60bb13cab.png" alt="ng_cnn"><br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/db0d8e0123bc420d34c9a6705ac60b13.png" alt="ng_cnn_1"></li>
</ul>
</li>
<li>为什么用卷积：参数共享+稀疏连接，前者是建立在对输入不同区域其特征检测方法仍然适用，正如很多人知道的，CNN擅于抓取具有平移不变性的特征</li>
<li>在建立完成CNN后，定义好损失函数，我们就可以用梯度下降或RMSPRO等等方法优化神经网络的参数了</li>
</ul>
<h2 id="第二周-深度卷积神经网络"><a href="#第二周-深度卷积神经网络" class="headerlink" title="第二周 深度卷积神经网络"></a>第二周 深度卷积神经网络</h2><h3 id="残差网络"><a href="#残差网络" class="headerlink" title="残差网络"></a>残差网络</h3><ul>
<li>He at al., 2015, deep residual networks for image recongnition</li>
<li><p>方法定义,输入直接跳跃到下N层<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/95b00198e2cc82499b4bf9980ac47f0a.png" alt="ng_residualblock"></p>
</li>
<li><p>带来的好处，其使得层数与训练误差成反比<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/651726e12356666030cbf7b521c31c53.png" alt="ng_residualandlayers"></p>
</li>
<li>产生效果的原因</li>
</ul>
<h3 id="实例研究"><a href="#实例研究" class="headerlink" title="实例研究"></a>实例研究</h3><h4 id="LeNet-5"><a href="#LeNet-5" class="headerlink" title="LeNet-5"></a>LeNet-5</h4><ul>
<li>LeCun et al., 1988. Gradient-based learning applied to document recognition</li>
<li>由于两个全连接，参数在6万左右</li>
<li>数据大小逐渐减少，通道数逐渐增多</li>
<li>过程为：输入——卷积——池化——卷积——池化——全连接——全连接——softmax</li>
<li>激活函数用的是sigmoid\tanh</li>
<li>如下图：<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/f1c276be3dd216d841203567c98c4b17.png" alt="ng_LeNet-5"></li>
</ul>
<h4 id="AlexNet"><a href="#AlexNet" class="headerlink" title="AlexNet"></a>AlexNet</h4><ul>
<li>Krizhevsky et al., 2012. ImageNet classification with deep convolutional neural network</li>
<li>结构和LeNet很像，只不过参数变成了6千万</li>
<li>使用了Relu</li>
<li>使用了多个GPU，并且特别研究了如何将计算量分布到多个GPU上面<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/7b6475049b5a00feb38029552230eb9c.png" alt="ng_AlexNet"></li>
</ul>
<h4 id="VGG-16"><a href="#VGG-16" class="headerlink" title="VGG-16"></a>VGG-16</h4><ul>
<li>Simonyan&amp;Zisserman 2015. Very deep convolutional networks for large-scale image recongnition</li>
<li>使用padding，并且s=1,过滤器64，128，256，512，参数138M个，16代表16层<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/52a9308f069f88f0c582838e2b2283b8.png" alt="ng_vgg_16"></li>
</ul>
<h4 id="ResNet-152层"><a href="#ResNet-152层" class="headerlink" title="ResNet,152层"></a>ResNet,152层</h4><h4 id="Inception"><a href="#Inception" class="headerlink" title="Inception"></a>Inception</h4>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/结构化机器学习项目.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/结构化机器学习项目.html" itemprop="url">结构化机器学习项目</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-08T18:36:40+08:00">
                2018-01-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI梦/" itemprop="url" rel="index">
                    <span itemprop="name">AI梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/结构化机器学习项目.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/结构化机器学习项目.html" class="cy_cmt_count" data-xid="/blog/结构化机器学习项目.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="机器学习策略"><a href="#机器学习策略" class="headerlink" title="机器学习策略"></a>机器学习策略</h2><h3 id="常见方法及局限"><a href="#常见方法及局限" class="headerlink" title="常见方法及局限"></a>常见方法及局限</h3><p>搭建深度学习模型后，模型达到了一定的准确率，若要再度提升算法效率，或许你会<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/a6cbb32e4ed57cb8919ab52d32385fa6.png" alt="ng_ff"><br>这里的问题在于，如此尝试诸多方法，或许半年就过去了，并且不见得会多有效。因此我们需要策略来加速这一过程，这正是此门课的独特之处。</p>
<h3 id="正交化"><a href="#正交化" class="headerlink" title="正交化"></a>正交化</h3><p>使用早期的电视屏幕调整作比喻，分为上下钮、左右钮、梯形钮，此种情况更容易控制屏幕。这样在训练集、开发集、测试集达到好的效果之后，再将模型在真实世界使用。</p>
<h3 id="使用单个评估指标"><a href="#使用单个评估指标" class="headerlink" title="使用单个评估指标"></a>使用单个评估指标</h3><ul>
<li>如查准及查全，使用F1 score代替，F1分数值是查准及查全的调和平均值——harmanic mean,当然它近似平均值</li>
<li>又如在真实的不同场景中，比如美国、中国、印度的图片识别猫的准确率不一致，可以直接求它们的平均值</li>
<li>以上针对算法的迭代优化选择而言，可以提高效率</li>
</ul>
<h3 id="优化指标及满足指标"><a href="#优化指标及满足指标" class="headerlink" title="优化指标及满足指标"></a>优化指标及满足指标</h3><p>即最优的，优化项目及满足项目，有多个指标时，可以先限定某些指标而专注于优化其中一个指标。举例而言，比如流行的智能音箱，优化唤醒率，而限制假阳率为24小时内最多1次，以此标准迭代算法。</p>
<h3 id="训练、开发、测试集"><a href="#训练、开发、测试集" class="headerlink" title="训练、开发、测试集"></a>训练、开发、测试集</h3><ul>
<li>开发集，叫称为交叉验证集，开发集的分布应于测试集一致</li>
<li>在早期机器学习阶段7：3，6：2：2是常见的划分方法，而在现代深度学习算法习惯使用大量的数据，故可用更小的比例使用到开发集和测试集。谨记住测试集的作用，它是为了评估投产系统的性能，它能高置信度评估的效果即可 ，所以它可能只要1万或十万即可，这远远比所有数据20%的比例少</li>
<li>在反色情猫分类器的例子中，将机器学习的过程分为独立两步，每一步找目标，即确定单一评估指标，第二步对准和射击目标<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/908a5e3dc3f7dc7d1f94c07c53ded776.png" alt="ng_catclassify"></li>
</ul>
<h3 id="机器的表现和人的表现"><a href="#机器的表现和人的表现" class="headerlink" title="机器的表现和人的表现"></a>机器的表现和人的表现</h3><ul>
<li>机器学习的准确度基本符合以下曲线,在追上人类以前发展很快，超越人类后发展很慢，它的上限即贝叶斯误差，也叫贝叶斯最优误差。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/fb704ed94c43e03f1ae2ef08d9cd3506.png" alt="ng_bayeserror"></li>
<li>低于人类的时候发展快的原因可以从三个角度分析，一为可从人类视角分析，二为可获取人工标签，三可以更好的分析偏差和方差</li>
</ul>
<h3 id="可避免的偏差与方差"><a href="#可避免的偏差与方差" class="headerlink" title="可避免的偏差与方差"></a>可避免的偏差与方差</h3><ul>
<li>加入概念：<a href="https://www.zhihu.com/question/27068705" target="_blank" rel="noopener">泛化误差</a>：在机器学习中泛化误差是用来衡量一个学习机器推广未知数据的能力，一图胜千言<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/8e88161f43c636e5bebe07028dbe1934.png" alt="ng_add_error"></li>
<li>举猫分类器而言，可以使用人类的偏差率来接近贝叶斯误差，因为人类在这方面很擅长。若偏差已没有增进空间，可以在考虑减少方差，方差可以通过正则或加数据来减少。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/e9853c9e01bb2c77abd481430fb06680.png" alt="ng_catvoidbias"></li>
<li>请注意人类水平的误差取决于具体目的，比如医学图像分类，不同的人的误差差率是不同的，估计贝叶斯误差可以使用最专业的团队的误差率<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/22bcdef589b4b7470d106dd2f19a7e21.png" alt="ng_reducingavoid"></li>
</ul>
<h3 id="理解人类的表现"><a href="#理解人类的表现" class="headerlink" title="理解人类的表现"></a>理解人类的表现</h3><ul>
<li>人类擅长处理自然感知任务，如图像、语音及NLP识别，在这些方面超越人类比较困难。在近几年的发展中，特定的几个领域内，如医学图像（皮肤癌、BCG判断）等已经取得了比人类更好的结果。</li>
<li>而在以下方面，机器学习已经远远超越了人类，它们的共同点是有大量的历史数据<ul>
<li>广告点击</li>
<li>推荐</li>
<li>预测用时——快递及运输</li>
<li>还贷</li>
</ul>
</li>
</ul>
<h3 id="误差分析"><a href="#误差分析" class="headerlink" title="误差分析"></a>误差分析</h3><p>在猫分类的例子中，假若你的错误率是10%，你的队员可能注意到有不少猫被识别成了猫，他可能建议你针对狗的优化算法，试想你可以收集更多狗的照片或设计一些只处理狗的算法，这样单独起一个项目会花费上月的时间，在这里建议一个简单的法子</p>
<ul>
<li>在开发集中取出100个被错误分类的例子</li>
<li>取出是狗的例子,找出它的特点，比如模糊的图像、滤镜的图像，这样你就更能理解你的分类器，具体看情况去处理它了。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/3cc21a20da564a3f00f4af0954e0937b.png" alt="ng_catdect"></li>
<li>对于错误标记的数据是是否需要修正，依情况而定，同样用错误表来分析，若主要问题在其它因素上，暂暂时不用管，反之则分析。如图。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/09d9124ea0149ce6c349e1657a4fc015.png" alt="ng_bias"></li>
<li>不管什么模型，也许很多研究人员、工程师都认为喂数据即可，其它人工分析是很有必要的，至少NG经常这么干，手工和这些错误做斗争可以快速的了解到工作的重点，这是很值得做的。强烈建议</li>
</ul>
<h3 id="快速的搭建系统并迅速迭代"><a href="#快速的搭建系统并迅速迭代" class="headerlink" title="快速的搭建系统并迅速迭代"></a>快速的搭建系统并迅速迭代</h3><ul>
<li>寻找好特定领域的方向，划分训练开发集并设定单一评估指标，迅速搭建初始系统并使用偏差/方差分析或误差分析理论去优化下一步。</li>
<li>实际情况训练和测试分布往往不一致，两者数据都打散然后划分是不可取的，目标的准心就有偏差了。经常的做法是，将测试数据加入训练集，而开发集和测试集只使用目标真实数据。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/001e95d226208589b6ac79293b6e7cd0.png" alt="ng_diffdis"></li>
<li>在不匹配数据划分的情况下的误差分析，我们往往加入训练开发混合集去定位误差是否是数据匹配问题导致的。对于下图最右边deverror和testerror比trainerror还小的情况，可以通过第二张片子来进一步分析，图上是车镜语音场景的一个例子。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/9765181a9909f8540596dcdb5cd05d75.png" alt="NG_trainde"><br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/a13ab0be285d7f4d6ee8e3220231b042.png" alt="ng_moreformula"></li>
<li>对于确定是数据不匹配的问题导致的误差，没有系统的解决方案，可以从以下两个角度尝试：<ul>
<li>手动分析误差并理解训练和开发测试集的分布差异</li>
<li>使得测试集的数据分布向测试集靠近，可能通过增加数据或人造数据的方式</li>
</ul>
</li>
<li>人造数据要注意的是，防止增加一小部分数据而造成模型对这一部分数据过拟合，用汽车识别的例子，若只取游戏中的车的合成图片，即便有海量的张数，但汽车的各类只有20种，这样就不行。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/c7c6fb7cc985c944c32ca31d9eaef00b.png" alt="ng_artificalsynthesis"></li>
</ul>
<h3 id="迁移学习"><a href="#迁移学习" class="headerlink" title="迁移学习"></a>迁移学习</h3><ul>
<li>迁移学习的过程，如下图所示，把输出层换成自己的层和输出层，再用自有数据训练。从原理上来说即利用其它模型已经学习到的特征，如轮廓、边、角等等基础特征<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/561cacd18c3d8ecdc8a228a19260f6ae.png" alt="ng_transfer"></li>
<li>从原理上理解，什么场景下适合迁移学习呢，对于那些比较难收集数据的场景，如射线科，如果有基础特征类似的基础场景已经较好的训练了便可以尝试迁移</li>
</ul>
<h3 id="多任务学习"><a href="#多任务学习" class="headerlink" title="多任务学习"></a>多任务学习</h3><ul>
<li>原理，注意和softmax的区别，它的目标有多个<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/23c7fec2fb7b2bc578289f69ddeb0fa1.png" alt="ng_MULTITASK"></li>
<li>什么情况下多任务学习<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/d01097fa3af60c0103a5921c0bd989d0.png" alt="ng_shouldmulti"></li>
</ul>
<h3 id="端到端的深度学习及适用场景"><a href="#端到端的深度学习及适用场景" class="headerlink" title="端到端的深度学习及适用场景"></a>端到端的深度学习及适用场景</h3><ul>
<li>它省去了传统机器学习的各类环节，在以往也许有的研究人员终其一生都在设计这些环节<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/3d78944e1e5fa81760fc5ac9700e0182.png" alt="ng_dotdot"></li>
<li>在人脸识别中我们先目标检测再做识别，如果要端对端的话，这需要大量的数据。传统机器翻译需要先做文本分析，再提取特征等等，端对端的学习在这种场景下非常适应，因为它有大量的数据。</li>
<li>因此关键的问题是有没有</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/Practical-introduction-to-data-structures-and-algorithm-analysis.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/Practical-introduction-to-data-structures-and-algorithm-analysis.html" itemprop="url">Practical introduction to data structures and algorithm analysis</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-28T11:12:18+08:00">
                2017-09-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/深耕码农/" itemprop="url" rel="index">
                    <span itemprop="name">深耕码农</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/Practical-introduction-to-data-structures-and-algorithm-analysis.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/Practical-introduction-to-data-structures-and-algorithm-analysis.html" class="cy_cmt_count" data-xid="/blog/Practical-introduction-to-data-structures-and-algorithm-analysis.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="概率论及一些基础思考"><a href="#概率论及一些基础思考" class="headerlink" title="概率论及一些基础思考"></a>概率论及一些基础思考</h1><h2 id="代价与效益"><a href="#代价与效益" class="headerlink" title="代价与效益"></a>代价与效益</h2><p>在有效的资源下将问题解决，称该算法是有效的。一个好的数据结构（解决方案）设计首先要考虑到业务场景，在操作上（增删改查），它有什么需求。比如查询上要求并发高、但在插入速度上并无太高的要求，或者反之。</p>
<h2 id="计算复杂度"><a href="#计算复杂度" class="headerlink" title="计算复杂度"></a>计算复杂度</h2><ul>
<li>通常我们考虑算法的在一定数据规模下的平均复杂度，但平均复杂度分析并不是一定可靠的，这建立在输入数据概率分布已知的情况下考虑的，通常这种假设每个元素出现的概率均等。但是不正确的假设也可能带来灾难的性的后果，特别是在搜索类算法上，如散列和搜索树，具体事例可参考9.4、5.4节。有时间考虑特殊的数据分布，也会带来好处，如9.2节（自组织线性表）</li>
<li>在实时系统中不考虑平均情况，而考虑最差的情况。</li>
<li>复杂度分析，通常采用渐近分析的方法，使用化简的方法计算上界，下界和平均情况。</li>
</ul>
<h2 id="最完美算法"><a href="#最完美算法" class="headerlink" title="最完美算法"></a>最完美算法</h2><p>联机算法——举例而言，最大子序列求和的问题</p>
<h2 id="运行时间中的对数"><a href="#运行时间中的对数" class="headerlink" title="运行时间中的对数"></a>运行时间中的对数</h2><ul>
<li>如二叉树，contains操作，较明显，在常数据O(1)时间问题的大小缩减为其一部分（通过是一半或小于一半），则该算法是O(logN)</li>
<li>最大公因(约）数，即使用欧几里德/辗转相除法计算gcd(M,N)。由定理，若M&gt;N，则有M mod N &lt; M/2，可得该算法迭代次数至多是O(logN)</li>
<li>幂次运算，使用递归分解，将乘法降到O(logN)</li>
</ul>
<h1 id="基本数据结构"><a href="#基本数据结构" class="headerlink" title="基本数据结构"></a>基本数据结构</h1><h2 id="表、栈、队列"><a href="#表、栈、队列" class="headerlink" title="表、栈、队列"></a>表、栈、队列</h2><h2 id="树"><a href="#树" class="headerlink" title="树"></a>树</h2><h3 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h3><p>可以使用栈来实现表达式树，也可用递归，这样会方便些。基本操作包括增(insert)、删(remove,两种可能性)、查(contains, findmin,findmax)，平均计算复杂度：</p>
<p>得O(nlogN)，但这无法控制上界，<strong>为控制任意次连续M次操作在最坏的情况下花费时间为O(MlogN)，引入AVL平衡树，当然它无法保证单次的操作的时间界。最后根据二八法则，将引入伸展树</strong></p>
<h3 id="AVL平衡树"><a href="#AVL平衡树" class="headerlink" title="AVL平衡树"></a>AVL平衡树</h3><p>  使用单旋和双旋调整高度，结构上每个节点信息加入了高度。核心插入代码：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">( <span class="keyword">const</span> Comparable &amp; x, AvlNode * &amp; t )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( t == <span class="literal">NULL</span> )</span><br><span class="line">        t = <span class="keyword">new</span> AvlNode( x, <span class="literal">NULL</span>, <span class="literal">NULL</span> );</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( x &lt; t-&gt;element )</span><br><span class="line">    &#123;</span><br><span class="line">        insert( x, t-&gt;left );</span><br><span class="line">        <span class="keyword">if</span>( height( t-&gt;left ) - height( t-&gt;right ) == <span class="number">2</span> )</span><br><span class="line">            <span class="keyword">if</span>( x &lt; t-&gt;left-&gt;element )</span><br><span class="line">                rotateWithLeftChild( t );</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                doubleWithLeftChild( t );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( t-&gt;element &lt; x )</span><br><span class="line">    &#123;</span><br><span class="line">        insert( x, t-&gt;right );</span><br><span class="line">        <span class="keyword">if</span>( height( t-&gt;right ) - height( t-&gt;left ) == <span class="number">2</span> )</span><br><span class="line">            <span class="keyword">if</span>( t-&gt;right-&gt;element &lt; x )</span><br><span class="line">                rotateWithRightChild( t );</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                doubleWithRightChild( t );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        ;  <span class="comment">// Duplicate; do nothing</span></span><br><span class="line">    t-&gt;height = max( height( t-&gt;left ), height( t-&gt;right ) ) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="伸展树"><a href="#伸展树" class="headerlink" title="伸展树"></a>伸展树</h3><p>之形伸展与一字伸展，目标是沿访问路径旋转  </p>
<h3 id="树的遍历"><a href="#树的遍历" class="headerlink" title="树的遍历"></a>树的遍历</h3><h3 id="B树——数据库的索引树，用于解决大量数据磁盘检索的问题"><a href="#B树——数据库的索引树，用于解决大量数据磁盘检索的问题" class="headerlink" title="B树——数据库的索引树，用于解决大量数据磁盘检索的问题"></a>B树——数据库的索引树，用于解决大量数据磁盘检索的问题</h3><p>注意B树的定义，5个特性，M\L参数的确定。如一个区块8K，每个键32B，在一颗M阶的B树中有M-1个键，则可算出M。对于叶子节点若每个记录是256字节，区块是8K，则可算出L=32。再回来看定义：</p>
<ol>
<li>数据在叶子节点，并在相同深度上，且数据项介于L/2到L之间；</li>
<li>非叶节点，存储M-1个键，指示查找方向，其儿子数在M/2到M之间;<br>注意B树插入时的分裂操作和删除的认领操作。</li>
</ol>
<h3 id="STL中set和map的树形实现"><a href="#STL中set和map的树形实现" class="headerlink" title="STL中set和map的树形实现"></a>STL中set和map的树形实现</h3><h3 id="散列"><a href="#散列" class="headerlink" title="散列"></a>散列</h3><ol>
<li>散列函数:利用horner法则，计算多项式函数$h_k=k_0+37k_1+37k_2=(37+37k_2)k_1+k_0$。通常建议桶大小为素数</li>
<li>冲突解决方法：分离链接、线性/平方探测、双散列。分离链接法因子可以到1，性能下降不明显，探测方法最好不超过0.5，双散列宜用质数。</li>
<li>再散列：一般使用途中策略，到达装载因子再散列</li>
<li>hashmap, hashset</li>
<li>散列比起二叉树而言速度虽有所提升但缺乏排序，通常用在比如编译器的符号表，拼写检查等等  </li>
</ol>
<h3 id="优先队列（堆）"><a href="#优先队列（堆）" class="headerlink" title="优先队列（堆）"></a>优先队列（堆）</h3><h2 id="排序与检索"><a href="#排序与检索" class="headerlink" title="排序与检索"></a>排序与检索</h2><h2 id="高级话题"><a href="#高级话题" class="headerlink" title="高级话题"></a>高级话题</h2>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/改善深层神经网络：超参数调试、正则化以及优化.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/改善深层神经网络：超参数调试、正则化以及优化.html" itemprop="url">改善深层神经网络：超参数调试、正则化以及优化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-15T17:45:29+08:00">
                2017-09-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI梦/" itemprop="url" rel="index">
                    <span itemprop="name">AI梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/改善深层神经网络：超参数调试、正则化以及优化.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/改善深层神经网络：超参数调试、正则化以及优化.html" class="cy_cmt_count" data-xid="/blog/改善深层神经网络：超参数调试、正则化以及优化.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="第一周-深度学习的实用层面"><a href="#第一周-深度学习的实用层面" class="headerlink" title="第一周 深度学习的实用层面"></a>第一周 深度学习的实用层面</h1><h2 id="训练、验证、测试集"><a href="#训练、验证、测试集" class="headerlink" title="训练、验证、测试集"></a>训练、验证、测试集</h2><ul>
<li>在小数时代，比例一般为6：2：2，大数据时代可适当调整，验证及测试集为10000左右即可。</li>
<li>train set 最好和后两者有相当的分布，比如猫的问题，在网上爬的猫有许多精良的照片，而用户实际上传的可能比较糙。</li>
<li>test set是为了拿到测试的无偏估计</li>
<li>ML是一个高度迭代的过程，即使最牛的专家也是如此。</li>
</ul>
<h2 id="偏差与方差"><a href="#偏差与方差" class="headerlink" title="偏差与方差"></a>偏差与方差</h2><ul>
<li>偏差代表训练集的错误率有多高，方差代表dev set 和train set的错误率的差别</li>
</ul>
<h2 id="正则化"><a href="#正则化" class="headerlink" title="正则化"></a>正则化</h2><p>regularizer，规则化，通过先验的知识来最大化贝叶斯最大后验估计，本质上是贝叶斯最大后验估计的<strong>似然函数</strong></p>
<ul>
<li>L1</li>
<li><p>L2：Frobenius Norm，直观上Lambda越大，权重矩阵被设为零<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/2d81fcb8cfe1cb048929564aa91f9c4f.png" alt="nn_reg_12181821"></p>
</li>
<li><p>dropout</p>
</li>
<li>其它减少过拟合的方法<ul>
<li>Data augmentation</li>
<li>early stop: 此种方法相对L2来说减少lambda的尝试计算量</li>
</ul>
</li>
</ul>
<h2 id="正则化输入（normalize"><a href="#正则化输入（normalize" class="headerlink" title="正则化输入（normalize)"></a>正则化输入（normalize)</h2><p>使用零均值，主要是用来提升速度，范围尺度类似即可，也不是一定要0-1。如下图，若不同特征相差尺度很大，则会形成如左不规则超球体，这样w的迭代次数会大大增加，对应的迭代步长也应设置偏小。</p>
<h2 id="梯度消失及爆炸"><a href="#梯度消失及爆炸" class="headerlink" title="梯度消失及爆炸"></a>梯度消失及爆炸</h2><p>由于层数太多，梯度指数级变化，这容易导致步长会非常小，训练时间会变得很长。传统激活函数都存在这一缺点，正向时爆炸，反向时消失，为防止上述问题，权重的初始值的选择有：</p>
<ul>
<li>若用RELU作为激活函数（<a href="http://blog.csdn.net/mzpmzk/article/details/77418030" target="_blank" rel="noopener">种类及特点</a>), $w$ 初始值可以使用 $np.sqrt(\frac{2}{n^{[l-1]}+n^{[l]}})$<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/1f3a7fe0374fc7a514f6c69809520867.png" alt="ng_vanishing_exploding_grad"><h1 id="第二周-优化算法"><a href="#第二周-优化算法" class="headerlink" title="第二周 优化算法"></a>第二周 优化算法</h1></li>
<li>Min-batch梯度下降：避免需要处理所有数据才能进行下一步</li>
<li>指数加权平均</li>
<li>动量（Momentum）梯度下降:类似移动平均线减缓摆动<script type="math/tex; mode=display">v_{dw} = \beta v_{dw} + (1-\beta)dw</script><script type="math/tex; mode=display">v_{db}=\beta v_{db} + (1-\beta)db</script><script type="math/tex; mode=display">w=w-\alpha v_{dw}</script><script type="math/tex; mode=display">b=b-\alpha v_{db}</script></li>
<li>RMSprop：让幅度大的参数变缓，让幅度小的参数变大</li>
</ul>
<script type="math/tex; mode=display">S_{dw} = \beta S_{dw} + (1-\beta){dw}^2</script><script type="math/tex; mode=display">S_{db}=\beta S_{db} + (1-\beta){db}^2</script><script type="math/tex; mode=display">w=w-\alpha \frac{dw}{\sqrt{S_{dw}}}</script><script type="math/tex; mode=display">b=b-\alpha \frac{db}{\sqrt{S_{db}}}</script><ul>
<li>Adam(Adaptive Moment Estimation): 各算法适应于不同的神经网络结构，该算法结合Momentum and RMSprop，非常常用。<ul>
<li>公式<script type="math/tex; mode=display">v_{dw} = \beta v_{dw} + (1-\beta_1)dw</script><script type="math/tex; mode=display">v_{db}=\beta v_{db} + (1-\beta_1)db</script><script type="math/tex; mode=display">S_{dw} = \beta S_{dw} + (1-\beta_2){dw}^2</script><script type="math/tex; mode=display">S_{db}=\beta S_{db} + (1-\beta_2){db}^2</script><script type="math/tex; mode=display">w=w-\alpha \frac{v_{dw}}{\sqrt{S_{dw}}}</script><script type="math/tex; mode=display">b=b-\alpha \frac{v_{db}}{\sqrt{S_{db}}}</script></li>
<li>超参数一般值：<ul>
<li>$\alpha$ : needs to be tune</li>
<li>$\beta_1$ : (first momentum):0.9</li>
<li>$\beta_2$ : (second momnetum:RMSprop):0.99</li>
</ul>
</li>
</ul>
</li>
<li>学习率衰减：多个方法，如倒数、指数等等</li>
<li>关于局部最优：在大量参数情况下可能会出现saddle问题，这样问题容易到达plateau状态，较难走出。这种可能性较小，通常使用Adam之类的优化方法解决</li>
</ul>
<h1 id="第三周-超参数调度、Batch正则与程序框架"><a href="#第三周-超参数调度、Batch正则与程序框架" class="headerlink" title="第三周 超参数调度、Batch正则与程序框架"></a>第三周 超参数调度、Batch正则与程序框架</h1><h2 id="超参数调整"><a href="#超参数调整" class="headerlink" title="超参数调整"></a>超参数调整</h2><p><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/149d38d31a5fa4e0576ff617c0408f08.png" alt="ng_hp"></p>
<ul>
<li>首先是红色的 $\alpha$，再者是黄色的学习率，第一、二动量及min-batch，最后再考虑调整层数及学习率延时 $\varepsilon$。</li>
<li>使用随机数、从粗到细</li>
<li>使用合适的分布尺寸，而不是使用均匀分布，比如对于 $\alpha$可以使用a log scala，举例而言：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">r = <span class="number">-4</span>*np.random.rand()</span><br><span class="line">alpha = <span class="number">10</span>^r</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="实践经验：两个流派"><a href="#实践经验：两个流派" class="headerlink" title="实践经验：两个流派"></a>实践经验：两个流派</h2><ul>
<li>使用各领域的常见参数（<strong>这意味需要对各个智能领域有的了解</strong>）</li>
<li>直觉很有效，<strong>定期更新参数，比如几个月</strong></li>
<li>babysitting（pandan）: 长期照看，评估调整——（<strong>不断的持久化模型吗？，一直迭代下去，还是每次都重新训练，模型可以以直训练下去吗？</strong>）</li>
<li>train in paraller: Caviar(鱼子酱)</li>
</ul>
<h2 id="网络内激活函数的normalizaion"><a href="#网络内激活函数的normalizaion" class="headerlink" title="网络内激活函数的normalizaion"></a>网络内激活函数的normalizaion</h2><p><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/eaa10f3214ad4cbd03b074755a13a8e0.png" alt="ng_batchnorm"><br>请注意以下三点：</p>
<ul>
<li>通过 $\alpha、\beta$两个超参数，可以控制 $Z^i$ 的范围，如右上图所示</li>
<li>单层网络中我们通过normalizaion来加快梯度下降的速度，那么也可以通过控制隐藏层的输入值来控制</li>
<li>andrew的推荐: Normalize $z$ rather than $a$</li>
</ul>
<h2 id="将Batch-Norm拟合进神经网络"><a href="#将Batch-Norm拟合进神经网络" class="headerlink" title="将Batch Norm拟合进神经网络"></a>将Batch Norm拟合进神经网络</h2><p><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/b398a029678304574bdf4e67d9ecc406.png" alt="ng_addBatchNorm"></p>
<ul>
<li>偏执项b从此被标准化抵消，即式子可简化为 $z^l=w^l a^{l-1}$</li>
</ul>
<h2 id="Batch-Norm奏效的原因"><a href="#Batch-Norm奏效的原因" class="headerlink" title="Batch Norm奏效的原因"></a>Batch Norm奏效的原因</h2><ul>
<li>加速梯度下降</li>
<li>It makes weights, later or deeper than your network, more robost to changes to weights in earlier layers of neural netowork. 举例而言，对于不带颜色的猫可能训练得很好，当带上颜色后，对于同样判断是否为猫的模型而言，输入数据的分布变化了，导致模型需要重新训练。这也称为<strong>covariate shift</strong>，为解决这个问题，可以使用Batch Norm。</li>
<li>顺便的作用，如dropout，引入了噪声，相当于加入了regularization.</li>
</ul>
<h2 id="测试模型时BatchNorm的计算"><a href="#测试模型时BatchNorm的计算" class="headerlink" title="测试模型时BatchNorm的计算"></a>测试模型时BatchNorm的计算</h2><ul>
<li>需要估算平均值及标准差</li>
<li>简单靠谱的处理方式是用指数加权平均去<strong>估算</strong></li>
<li>跑全量数据batchnorm也可以</li>
</ul>
<h2 id="Softmax分类"><a href="#Softmax分类" class="headerlink" title="Softmax分类"></a>Softmax分类</h2><p>逻辑回归的一般形式,对比hard max而言，比如分类结果值为 $[1,0,0,0]$ 而非 $[0.8,0.2,0,0]$<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/6d6b110e436fb245d51cbf1179d231d2.png" alt="ng_softmax"></p>
<h2 id="理解及训练Softmax分类器"><a href="#理解及训练Softmax分类器" class="headerlink" title="理解及训练Softmax分类器"></a>理解及训练Softmax分类器</h2><p>同逻辑回归的二分类器的损失函数，这里同样使用最大似然的思想来定义损失函数，使用<a href="https://www.cnblogs.com/maybe2030/p/4751804.html#_label1" target="_blank" rel="noopener">常见最优化方法</a>——梯度下降法来求解模型参数 $w,b$。<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/4e804d7c109e9149bf95fc2df0603b14.png" alt="ng_softmax_loss"></p>
<h2 id="深度学习框架"><a href="#深度学习框架" class="headerlink" title="深度学习框架"></a>深度学习框架</h2><p><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/de6e08b5039630e827e6a07ddb979868.png" alt="ng_frameworks"></p>
<h4 id="易用"><a href="#易用" class="headerlink" title="易用"></a>易用</h4><h4 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h4><p>  长时间的开源，真正的开放，而不是一段时间后转为自已的服务，停止开源。</p>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><p>当然也取决于语言、用途（视觉、NLP或者广告）</p>
<h2 id="Tensflow"><a href="#Tensflow" class="headerlink" title="Tensflow"></a>Tensflow</h2><ul>
<li>它核心在于计算损失函数并自动求导，它重载了普通的运算，所以以下是等价的：<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/8d8b480a53b18ff52346c3ab73387c63.png" alt="ng_cost"></li>
<li>它通过简单几句初始化建立计算图，通过placeholder喂以数据，通过自动求导计算最优cost<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/43e55f2e9f72d5d917becb7c40778281.png" alt="ng_computergraph"></li>
<li>Python 使用with可自动清理类的显式资源，tensoflow通过tf.variable来定义求取的变量</li>
<li>总而言之，<strong>它的框架是计算图，核心是损失函数及对应的求解方法，辅以定义自变量、喂养数据的手段，最后运行该图</strong><br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/449c3a1a770e93d143aade68d90f049f.png" alt="ng_feed"></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/神经网络与深度学习.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/神经网络与深度学习.html" itemprop="url">神经网络与深度学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-30T17:20:41+08:00">
                2017-08-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI梦/" itemprop="url" rel="index">
                    <span itemprop="name">AI梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/神经网络与深度学习.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/神经网络与深度学习.html" class="cy_cmt_count" data-xid="/blog/神经网络与深度学习.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="第一、二周：概论与基础"><a href="#第一、二周：概论与基础" class="headerlink" title="第一、二周：概论与基础"></a>第一、二周：概论与基础</h3><blockquote>
<p>sigmoid在逻辑回归里为什么没用被ReLU替代</p>
</blockquote>
<ul>
<li>sigmoid在感知器结果输出里可以将任意输入连接的映射到 $[0,1]$ 之间，且结果保持连续</li>
<li>ReLu作为深度学习引入的激活函数，特性在于稀疏的激活性、单侧抑制与相对宽的兴奋边界</li>
</ul>
<blockquote>
<p>LR中损失函数不用平方误差，为什么它是非凸的。</p>
</blockquote>
<ul>
<li>因为加入了非线性的Sigmoid函数(注意，若是纯线性的，使用最小二乘可直接估计 $w$)，它使得平方误差损失函数是非凸的，而以下损失函数定义（极大似然的思想）没有这个问题，而且它易于求导的特点决定了使用梯度下降来求极值更方便[<strong>在无约束优化问题中，对目标函数直接微分的方法一般难以求解，故常用迭代的方法</strong>]：<script type="math/tex; mode=display">da/dz = z(1-z), dL/dz= a - y \\  \mbox{if } L=-( y log a + (1-y)log(1-a) )</script><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/e70536dc3cdac781213e6e86a904d5ac.png" alt="ng_gradientdescent"></li>
</ul>
<blockquote>
<p>矩阵运算Numpy的高效</p>
</blockquote>
<ul>
<li>避免矩阵运算使用For循环，100m时差300倍效率，因为 numpy使用到了CPU\GPU的SIMD指令，运行速度更快。同时，对于numpy有内置的函数也一样，尽量使用，如log,max  etc..</li>
<li>在python中，z= np.dot(w.T, x) + b , b会自动扩展成一个n维向量，这在python称为broadcast<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/849e2ed8c823392209bd02a6e7397727.png" alt="ng_broadcast"></li>
<li>在使用的过程中，reshape是o(1)操作，多多益善，尽量不使用rank为1的数组。</li>
</ul>
<h3 id="第三周-浅层神经网络"><a href="#第三周-浅层神经网络" class="headerlink" title="第三周 浅层神经网络"></a>第三周 浅层神经网络</h3><ul>
<li>二级神经网络，即只有一个隐藏层的神经网络。</li>
<li>输出层通常使用sigmoid函数，而隐藏层不用，一般至少使用tanh来代替，因为它的输出介于-1与1之间，这样均值为0，便于下一层的计算。考虑到梯度下降，sigmoid与tanh在最大小值处导数变化小，reLU及leaky reLU更常用。当然这一切根据实际情况调整。</li>
<li>隐藏层不应使用线性激活函数，若用则相当于没有隐藏层，输出层若要出回归值，则可使用。</li>
<li>随机w,并乘以较小的系数，一般让随机参数比较小。</li>
</ul>
<h3 id="第四周-深层神经网络"><a href="#第四周-深层神经网络" class="headerlink" title="第四周 深层神经网络"></a>第四周 深层神经网络</h3><p><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/44daf85883f94f8f64ccac3f651cfefd.png" alt="ng_forwardandbackward"></p>
<h4 id="hyper-parameter——控制参数的参数"><a href="#hyper-parameter——控制参数的参数" class="headerlink" title="hyper parameter——控制参数的参数"></a>hyper parameter——控制参数的参数</h4><ul>
<li>层数</li>
<li>迭代次数</li>
<li>下降速率</li>
<li>激活函数的选择</li>
<li>batch size</li>
</ul>
<h4 id="parameter"><a href="#parameter" class="headerlink" title="parameter"></a>parameter</h4><ul>
<li>权重 $w$</li>
<li>偏移量 $b$</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/action-in-machine-learning.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/action-in-machine-learning.html" itemprop="url">action in machine learning</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-29T18:21:54+08:00">
                2017-08-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI梦/" itemprop="url" rel="index">
                    <span itemprop="name">AI梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/action-in-machine-learning.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/action-in-machine-learning.html" class="cy_cmt_count" data-xid="/blog/action-in-machine-learning.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="树回归"><a href="#树回归" class="headerlink" title="树回归"></a>树回归</h3><ul>
<li>连续型数值的混乱度：总平方误差来表示，即方差*m</li>
<li>离散型的标称的混乱度可以用香农熵表示</li>
<li>若叶节使用的模型是分段常数则称为回归树，若叶节点使用的模型是线性回归方程则称为模型树</li>
<li>使用CART构建出的树倾向于过拟合，分别使用预剪枝和后剪枝解决这个问题。预剪枝设置停止条件来调整拟合问题，这需要不断调整，见P168。而后剪枝首先构造足够复杂的树，然后使用测试集来判断叶节点合并能否降低误差</li>
<li>决策树通过迭代实现分类，离散情况下，叶节点的类别即预测的类别，连续情况下，若是回归树则是该子树叶子节点的平均值，若是模型树，则是该（线性）模型的值</li>
</ul>
<h3 id="Random-Forest-GBDT"><a href="#Random-Forest-GBDT" class="headerlink" title="Random Forest/GBDT"></a>Random Forest/GBDT</h3><p><a href="http://blog.csdn.net/google19890102/article/details/51746402" target="_blank" rel="noopener">参考介绍一：二分类</a><br><a href="http://www.cnblogs.com/LeftNotEasy/archive/2011/03/07/random-forest-and-gbdt.html" target="_blank" rel="noopener">参考介绍一:多分类</a></p>
<ul>
<li>随机建立树的方式，随机采样包括行采样（样本），列采样（特征）</li>
<li>即本质是每颗树是窄领域内的专家，众专家一起投票</li>
</ul>
<h3 id="预测数值型数据-回归"><a href="#预测数值型数据-回归" class="headerlink" title="预测数值型数据:回归"></a>预测数值型数据:回归</h3><h4 id="线性回归"><a href="#线性回归" class="headerlink" title="线性回归"></a>线性回归</h4><p>  使用最小二乘法，得$若X非奇异，则有w=(X^tX)^{-1}X^ty$</p>
<h4 id="局部加权线性回归（Local-Weighted-Leaner-Regression）"><a href="#局部加权线性回归（Local-Weighted-Leaner-Regression）" class="headerlink" title="局部加权线性回归（Local Weighted Leaner Regression）"></a>局部加权线性回归（Local Weighted Leaner Regression）</h4><p>  线性回归的问题是容易欠拟合，因此引入局部加权</p>
<script type="math/tex; mode=display">\hat{w}=(X^twX)^{-1}X^twy</script><p>  通常使用高斯核用来赋于权重$w(i,i)=e^{\frac {x^{(i)}-x}{-2k^2}}$，即有离预测点越近的点权重越大，同时参数K控制了参与运算的数据，这样就有如下图:<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/d1676ee6aefd1a476cc7f40036c87f5c.png" alt="aiml-localweightedLR"></p>
<p>  此方法缺点在于<strong>计算量增加，每次预测必须在全集上运行</strong>，好处在于可以控制拟合程度<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/e9cc4d793fd511a4e7749fa6660005c5.png" alt="aiml-LR"></p>
<h4 id="缩减系数——用于更好的理解数据并处理特征比样本多的问题"><a href="#缩减系数——用于更好的理解数据并处理特征比样本多的问题" class="headerlink" title="缩减系数——用于更好的理解数据并处理特征比样本多的问题"></a>缩减系数——用于更好的理解数据并处理特征比样本多的问题</h4><p>  对于$X^TX$为奇异矩阵，在$X^TX$基础加上 $\lambda I$使得矩阵非奇异，这种方法称为<em>岭回归</em>。此方法有三个用途：</p>
<ul>
<li>用于处理特征比样本多的情况</li>
<li>用于在估计中加入偏差，从而得到更好的估计</li>
<li>通过引入   $\lambda$ 来限制 $w$ 之和，通过引入惩罚，能够减少不重要的参数，这类技术在统计学称为衰减。（迹不变）</li>
<li>此公式$$等价于最小二乘加入约束</li>
</ul>
<h3 id="附加篇：各类方法的一个归纳"><a href="#附加篇：各类方法的一个归纳" class="headerlink" title="附加篇：各类方法的一个归纳"></a>附加篇：各类方法的一个归纳</h3><ul>
<li>树模型：DT, GBDT, RF</li>
<li>概率模型：Bayes</li>
<li>最优化：LR, SVM<ul>
<li>LR：简单实用，互联网CTR预估被广泛使用</li>
<li>SVM：简单、多分类问题比SVM好，不好解释；</li>
</ul>
</li>
<li>距离划分，判别模型<ul>
<li>KNN：简单、多分类问题比SVM好，不好解释；</li>
</ul>
</li>
<li>集成方法：Adaboost</li>
<li>方法比较<ul>
<li>NB与LR<ul>
<li>相同点：都是特征的线性表述，解释性对较好；</li>
<li>不同点：NB要求严格独立，NB有利于并行化，但随着数据量和维度增多，LR更合适</li>
</ul>
</li>
</ul>
</li>
<li>可持久化的模型：决策树</li>
</ul>
<h3 id="决策树-随机森林-adaboost-GBDT"><a href="#决策树-随机森林-adaboost-GBDT" class="headerlink" title="决策树|随机森林|adaboost|GBDT"></a>决策树|随机森林|adaboost|GBDT</h3><ul>
<li><a href="http://www.cnblogs.com/wentingtu/archive/2011/12/13/2286212.html" target="_blank" rel="noopener">决策树模型组合之（在线）随机森林与GBDT</a></li>
<li><a href="http://blog.csdn.net/xlinsist/article/details/51475345" target="_blank" rel="noopener">Bagging（Bootstrap aggregating）、随机森林（random forests）、AdaBoost</a></li>
<li><a href="http://blog.csdn.net/xlinsist/article/details/51468741" target="_blank" rel="noopener">决策树ID3、C4.5、C5.0以及CART算法之间的比较-并用scikit-learn决策树拟合Iris数据集</a></li>
<li>ID3缺点:<ul>
<li>对于多值的属性非常之敏感</li>
<li>无法处理连续值</li>
<li>容易产生过拟合，即训练数据训练太彻底，但大一点数据集错误率上升，关注了些局部信息</li>
</ul>
</li>
<li>C4.5—-C5.0<ul>
<li>解决上述1、2的问题，核心思想是加入了增益率</li>
</ul>
</li>
<li>CART<ul>
<li>能预测出值（回归），同时能全用训练和交叉验证不断评估，修剪决策树</li>
</ul>
</li>
</ul>
<h3 id="K-nearest"><a href="#K-nearest" class="headerlink" title="K-nearest"></a>K-nearest</h3><ul>
<li>思路：基于现有已知标签的样本数据集，寻找被预测样本的最近的K个样本，返回K个里频率最多的那个标签。</li>
<li>优点：最简单有效的分类、对异常值不敏感</li>
<li>缺点：解释性差、类别评分无规格化，不平衡问题</li>
<li>适应：<a href="http://scikit-learn.org/stable/modules/neighbors.html#unsupervised-nearest-neighbors" target="_blank" rel="noopener">brute force\kd_tree\balltree的选择</a></li>
</ul>
<h3 id="PCA与SVD"><a href="#PCA与SVD" class="headerlink" title="PCA与SVD"></a>PCA与SVD</h3><p><a href="http://blog.csdn.net/jacke121/article/details/59057192" target="_blank" rel="noopener">http://blog.csdn.net/jacke121/article/details/59057192</a><br>pca是单方向上的降维，SVD是两个方向上的降维。<br>SVD表示是$A=U\Sigma V^T$，其中U,V是正交的。<br>若要降维：使用这个公式，其具体数学推导，暂不明。现实含义可以这样理解：<br>在SVD的三个矩阵（假设叫1，2，3）中，1-2表示用户降维转换，2-3表示物品降维转换，在用户推荐那个场景，由于是使用基于物品的推荐，要计算两物品的相似度，则可理解为只需要用户角度降维，即1-2的转换。即有</p>
<script type="math/tex; mode=display">U_k \Sigma V=> A^T U_k \Sigma</script><p>推导点：<strong>如如此在用户上降维，那是否可以直接通过PCA在用户角度降维？</strong></p>
<h3 id="关联分析"><a href="#关联分析" class="headerlink" title="关联分析"></a>关联分析</h3><p>支持度，可信度</p>
<ul>
<li>Apriori</li>
</ul>
<h3 id="附加篇一"><a href="#附加篇一" class="headerlink" title="附加篇一"></a>附加篇一</h3><blockquote>
<p>张同学的问题：SVM中，如下代码中权重 $w$ 为何不能做特征的权重值。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calcWs</span><span class="params">(alphas, dataArr, classLabels)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    输入：alphas, 数据集, 类别标签</span></span><br><span class="line"><span class="string">    输出：目标w</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    X = mat(dataArr)</span><br><span class="line">    labelMat = mat(classLabels).transpose()</span><br><span class="line">    m, n = shape(X)</span><br><span class="line">    w = zeros((n, <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">        w += multiply(alphas[i] * labelMat[i], X[i, :].T)</span><br><span class="line">    <span class="keyword">return</span> w</span><br></pre></td></tr></table></figure>
<p>对比线性情况而言,有 $w= \Sigma \alpha y_i x_i$ ，书中有下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w += multiply(alphas[i] * labelMat[i], X[i, :].T)</span><br></pre></td></tr></table></figure></p>
<p>目标函数为：$y=(\Sigma \alpha y_i x_i) x + b$ 而对于映射核空间的情况，书中有描述<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/c9fb298cf712884a5ad1c6d2407c4b95.png" alt="aiml-weightbook"><br>此时目标函数则为 $y=\Sigma \alpha y_i k(\phi(x_i),\phi(x_j))+b$。显然，特征向量 $w$ 是无法拆出来的。</p>
<blockquote>
<p>对weights = weights + alpha <em> dataMatrix.transpose() </em> error 这一行的理解</p>
</blockquote>
<ul>
<li>角度一：<a href="http://blog.csdn.net/lu597203933/article/details/38468303" target="_blank" rel="noopener">http://blog.csdn.net/lu597203933/article/details/38468303</a>  AndrewNg<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/79f4eb72472afa25f82690b0823b603d.png" alt="aiml-weight"></li>
<li>角度二：矩阵微分的角度理解 <a href="http://blog.csdn.net/aichipmunk/article/details/9382503" target="_blank" rel="noopener">http://blog.csdn.net/aichipmunk/article/details/9382503</a></li>
</ul>
<h3 id="附加篇二：机器学习算法路径图"><a href="#附加篇二：机器学习算法路径图" class="headerlink" title="附加篇二：机器学习算法路径图"></a>附加篇二：机器学习算法路径图</h3><p><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/e161673fc2063c42f4d407fd7057fc1f.png" alt="aiml-algorithm chea-sheet"><br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/daa070eafedebe29f976a12a0b65b08c.png" alt="aiml-td"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/Computer-System-A-Programmer-s-Perspective.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/Computer-System-A-Programmer-s-Perspective.html" itemprop="url">Computer System, A Programmer's Perspective</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-21T14:22:46+08:00">
                2017-08-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/深耕码农/" itemprop="url" rel="index">
                    <span itemprop="name">深耕码农</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/Computer-System-A-Programmer-s-Perspective.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/Computer-System-A-Programmer-s-Perspective.html" class="cy_cmt_count" data-xid="/blog/Computer-System-A-Programmer-s-Perspective.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="导言"><a href="#导言" class="headerlink" title="导言"></a>导言</h1><ol>
<li>信息就是位+上下文，如文本文件、二进制文件；</li>
<li>程序：文本——预处理器——编译器——汇编器——链接器——可执行文件<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/d8403afcfd487487262309d0137d406f.png" alt="CS_compile"></li>
</ol>
<p>从JAVA的角度上看，JAVACODE在JVM上亦符合上述过程。<br>JVM这个代码级机器可参考百度百科，包括对JVM指令系统、寄存器、栈结构及子系统（GC、类加载器）等<br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/8c5d39071eb21c9f569e9e46119377d3.png" alt="JVM"><br><img src="https://atom-1258994332.cos.ap-beijing.myqcloud.com/32f2e3db6434701a8206f6ce128bf139.png" alt="cs_jvm_stack"></p>
<p><strong>基本上，一个线程启动后分配一个栈（-XSSS），保存局部变量、操作数、指向常量池的引用及返回地址，这些称为一个桢，进入新方法后，再压入一个帧；同时分配一个私有PC寄存器用于任何分支，循环，方法调用，判断，异常处理，线程等待以及恢复线程，递归等等； 所有的线程共享方法区（PERM)及堆</strong></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://iboyce.com/blog/集体智慧编程.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Boyce Xu">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="博伊斯">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/blog/集体智慧编程.html" itemprop="url">集体智慧编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-17T14:27:46+08:00">
                2017-07-17
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI梦/" itemprop="url" rel="index">
                    <span itemprop="name">AI梦</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-comment-o"></i>
              </span>
              
                <a href="/blog/集体智慧编程.html#SOHUCS" itemprop="discussionUrl">
                  <span id="url::http://iboyce.com/blog/集体智慧编程.html" class="cy_cmt_count" data-xid="/blog/集体智慧编程.html" itemprop="commentsCount"></span>
                </a>
              
            
          

          
          

          

          

          

        </span></div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="推荐"><a href="#推荐" class="headerlink" title="推荐"></a>推荐</h4><ul>
<li>对于每人都持有的项，使用权重稀释</li>
<li>itemCF，通常我们需要在用户基数和评分数量不是很大的时候去计算，随着用户的增长，物品之间的相似度评价会越来越稳定</li>
<li>文本聚类，注意过滤太常用的the     ，可以定一个上下界【10%，50%】<h4 id="聚类"><a href="#聚类" class="headerlink" title="聚类"></a>聚类</h4></li>
<li>分层聚类，优点在于直观，不用指定聚类数，缺点计算量惊人<h4 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h4></li>
<li>流程：<br>爬虫——设计SCHEMA——索引——查询——评分排名（单词频度 、文档位置、单词距离）——</li>
<li>评分<ul>
<li>普通指标：单词频度 、文档位置、单词距离</li>
<li>利用外部回指-简单计数<br>*　pagerank</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Boyce Xu</p>
              <p class="site-description motion-element" itemprop="description">AI</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Boyce Xu</span>

  
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>



        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  




  
    <script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cytlQslB7"></script>
  









  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
